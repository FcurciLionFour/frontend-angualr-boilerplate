<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="text-xl font-semibold text-slate-900">Usuarios</h1>
    <p class="text-sm text-slate-600">
      Gestión de usuarios del sistema
    </p>
  </div>

  <a routerLink="/users/new"
    class="inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm hover:bg-blue-700">
    + Nuevo usuario
  </a>
</div>


<!-- Loading -->
<div *ngIf="loading()" class="text-gray-500">
  Cargando usuarios…
</div>

<!-- Empty -->
<div *ngIf="!loading() && users().length === 0" class="text-gray-500">
  No hay usuarios registrados.
</div>

<!-- Table -->
<div *ngIf="!loading() && users().length > 0" class="bg-white rounded shadow overflow-hidden">
  <table class="min-w-full text-sm">
    <thead class="bg-gray-100 text-left">
      <tr>
        <th class="px-4 py-3 font-medium">Email</th>
        <th class="px-4 py-3 font-medium">Roles</th>
        <th class="px-4 py-3 font-medium text-right">Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let user of users()" class="border-t hover:bg-gray-50 transition" [class.opacity-50]="user.isActive!">

        <td class="px-4 py-3">
          {{ user.email }}
        </td>

        <td class="px-4 py-3">
          <span *ngFor="let role of user.roles" class="inline-block mr-2 px-2 py-1 text-xs rounded bg-gray-200">
            {{ role }}
          </span>
        </td>

        <td class="text-right text-sm space-x-3">
          <a class="text-blue-600 hover:underline" [routerLink]="['/users', user.id]">Ver</a>
          <a *ngIf="canCreate()" class="text-amber-600 hover:underline"
            [routerLink]="['/users', user.id, 'edit']">Editar</a>
          <a *ngIf="canCreate()" class="text-red-600 hover:underline" (click)="confirmDelete(user)">Eliminar</a>
        </td>
      </tr>
    </tbody>
  </table>
</div>